# 图像插值方法

图像的在插值是指在对图像进行缩放时，由于没有目标位置的像素素，而根据原图像的像素值来计算目标位置的像素值的方法

常用的图像插值方法有：最近邻插值、双线性插值、双立方插值

### 1.最近邻插值

最近邻插值是最简单的方法

![](F:\NoteBook\.gitbook\assets\最近邻.png)

假设原图像大小为$(W,H)$，缩放后图像的大小为$(w,h)$，则缩放比例$k_w = w/W, k_h=h/H$。

假设缩放后图像上的一点$P(x,y)$，则映射到原图的坐标$P'(x/k_w, y/k_h)$，在原图上找到距离$P'$最近（小数四舍五入）的像素点，将它的像素值作为缩放后像素$P$的像素值。

### 2.双线性插值

首先，什么是线性插值？

![](F:\NoteBook\.gitbook\assets\插值.png)

已知两个点$(x0,y0),(x1,y1)$，要计算某一点$x$处的$y$值

则此时：
$$
\frac{y-y_0}{x-x_0} = \frac{y_1-y_0}{x1-x_0}
$$

$$
y=\frac{x_1-x}{x_1-x_0}y_0+\frac{x-x_0}{x_1-x_0}y_1
$$

这就是线性插值

因为我们需要计算的是目标位置的像素值，有$x,y$两个轴，所以双线性插值指的就是在$x,y$轴分别做一次插值

![](F:\NoteBook\.gitbook\assets\双线性插值.png)

首先，按照最近邻中的方法将目标位置映射到原图中。这里假设映射后的点为$P$，且附近的四个像素点为$Q_{11},Q_{12},Q_{21},Q_{22}$，则双线性插值后$P$点的像素值为
$$
f(P) = w_1f(Q_{11})+w_2f(Q_{12})+w_3f(Q_{21})+w_4f(Q_{22})
$$
我们先对$x$轴进行线性插值得到：
$$
f(R_1)=\frac{x-x_1}{x_2-x_1}f(Q_{21}) + \frac{x_2-x}{x_2-x_1}f(Q_{11}) \\
f(R_2)=\frac{x-x_1}{x_2-x_1}f(Q_{22}) + \frac{x_2-x}{x_2-x_1}f(Q_{21})
$$
再对$y$轴进行插值得到：
$$
f(P)=\frac{y-y_1}{y_2-y_1}f(R_2) + \frac{y_2-y}{y_2-y_1}f(R_1)
$$
即：

![](F:\NoteBook\.gitbook\assets\双线性插值公式.png)

### 3.双立方插值

双立方插值利用映射后的像素点附近的16个像素点进行插值，也就是说计算这16个像素点的权重，相乘再求和得到目标位置的像素值

![](F:\NoteBook\.gitbook\assets\三次插值_1.jpg)

权重计算基于BiCubic基函数，它的公式如下：

![](F:\NoteBook\.gitbook\assets\三次插值公式.jpg)

注意：这里计算时，$x$为像素点$P$到附近像素点$a_{ij}$的距离，分别计算$i,j$两个方向，再相乘得到$w_{ij}$

