# Git使用

### Git基础

* 直接记录快照，而不是差异比较

  其他版本控制系统大部分以文件变更列表的方式存储信息，也就是说，它们保存一组基本文件，然后在文件发生变化时，保存变化后的文件与基本文件的差异，得到新的版本

  ![](F:\NoteBook\.gitbook\assets\git_1.png)

  而Git则不同，它保存的是数据的快照。可以这样理解：在提交更新时，Git会对当时的全部文件生成一个快照（复制一份），并保存这个快照的索引，通过索引可以快速定位并恢复到到任何版本。对没有修改的文件，只保存一个指向原文件的链接，而不拷贝。

  ![](F:\NoteBook\.gitbook\assets\git_2.png)

* Git保证完整性

  Git中的所有数据在存储前都计算校验和，然后以校验和作为当前版本的引用。校验和是基于Git中文件的内容和目录结构来计算的，所以通过比对检验和和文件内容，可以保证内容和保存时是一样的

  ```
  24b9da6552252987aa493b52f8696cd6d3b00373
  ```

* 三种状态

  在Git中涉及到三种状态：已提交、已修改和已暂存。

  已提交指数据已经保存到本地数据库中了；已修改指的是数据发生了改变，但还没有提交到数据库中；已暂存指的是对某一个修改的文件进行了标记，在下一次提交时保存到数据库中

### 基础操作

为了进行Git操作，首先需要有Git仓库。Git仓库就是一个目录（文件夹），只不过除了原始的项目文件外，里面还有Git保存的一些信息

#### 1.获取Git仓库

* 自己创建

  ```bash
  git init
  ```

* 克隆现有的仓库

  ```bash
  git clone https://github.com/libgit2/libgit2
  ```

#### 2.查看当前状态、暂存和提交

* 查看当前状态

  ```bash
  git status
  ```

  可以查看哪些文件没有在跟踪列表中、哪些跟踪列表中的文件已经修改、哪些文件添加到了暂存区中

* 暂存

  `git add`将文件加入到跟踪列表中，并暂存它当前的状态

  添加单个文件

  ```bash
  git add filename
  ```

  添加所有改动

  ```bash
  git add -A
  ```

  添加新文件和编辑过的文件但不包括删除的文件

  ```bash
  git add .
  ```

* 提交

  ```bash
  git commit -m "提交说明"
  ```

  将暂存区的文件提交

#### 3.查看提交历史

```bash
git log
```

#### 4.远程仓库使用

通常先建立远程仓库，然后`git clone`克隆到本地

* 查看远程仓库

  查看本地仓库配置了哪些远程仓库

  ```bash
  git remote //只显示远程仓库名
  git remote -v //显示远程仓库名和url
  ```

* 添加远程仓库

  ```bash
  git remote add 远程仓库名 远程仓库url
  //示例：
  git remote add pb https://github.com/paulboone/ticgit
  ```

  远程仓库名只是对url的一个替代，可以自定义

* 抓取

  获取远程仓库中的数据

  ```bash
  git fetch 远程仓库名
  ```

* 推送

  将本地仓库的某个分支推送给某个远程仓库

  ```bash
  git push origin master //把master分支推送给origin远程仓库
  ```

#### 5.分支操作

* 查看所有分支

  ```bash
  git branch
  iss53
  * master
  testing
  ```

  上面一共三个分支，其中*表示当前所处的分支（即HEAD指向的分支）

* 创建和切换分支

  ```bash
  //创建
  git branch 分支名
  //切换
  git checkout 另一分支名
  
  //创建并切换
  git checkout -b 分支名
  ```

* 合并分支

  将当前分支与另一分支合并

  ```bash
  git merge 另一分支
  ```

  通常合并分支时，有可能会发生内容冲突，需要自行决定合并时保留的内容

